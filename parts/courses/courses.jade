template(name='course_card')
    //- .ui.card    
    a.ui.card(href="/course/#{_id}/view")
        if image_id
            img.ui.fluid.image(src="{{c.url image_id width=400 height=200 crop='fill'}}")
        .content
            .ui.inline.header #{title}
            div
            |#{student_ids.length} students
            div
            each tags 
                .ui.small.basic.label #{this}
            //- i.dollar.icon
            //- a.ui.large.button(href="/course/#{_id}")
            //-     i.yellow.right.chevron.icon
            
            

template(name='course_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column 
                    .ui.header 
                        i.pencil.icon
                        | edit '#{title}' course
                    a.ui.fluid.button(href="/course/#{_id}/view" title='save')
                        i.checkmark.large.icon
                        |save
                    +remove_button
                    +boolean_edit key='published' label='published' direct=true
                    +image_edit key='image_id' icon='image' label='image' direct=true
                    //- +icon_edit key='icon' icon='template' label='icon' direct=true
                .six.wide.column 
                    +text_edit key='title' direct=true
                    //- +html_edit key='title' label='title' direct=true
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                    +html_edit key='course' label='course' icon='content' direct=true
                .six.wide.column 
                    +boolean_edit key='premium' label='premium' direct=true
                    div
                    if premium 
                        +number_edit key='cost' label='cost' direct=true



template(name='course_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .sixteen.wide.center.aligned.column
                    a.ui.large.button(href="/m/course")
                        //- +ismall name='classroom'
                        i.up.chevron.icon
                        |courses
            
            .row
                .three.wide.column
                    .ui.header course view 
                    img.ui.fluid.image(src="{{c.url image_id width=400 crop='fill'}}")
                    
                    if can_edit
                        a.ui.icon.large.button(href="/course/#{_id}/edit" title='edit course')
                            i.pencil.icon
                    +user_list_toggle key='bookmark_ids' add_icon='bookmark outline' remove_icon='bookmark' add_label='bookmark' remove_label='unbookmark'  big=true
                    +voting_full
                .ten.wide.column
                    .ui.header 
                        small title
                        strong #{title}
                    |!{course}
                    .ui.inline.header 
                        |totals
                    i.refresh.link.grey.icon.calc_course_total(title='refresh')
                    .ui.header #{question_count} questions
                    .ui.large.link.list
                        each course_sessions
                            a.item(href="/session/#{_id}/view")
                                | #{when} by #{_author_username}
                                |#{correct_percent}
                    .ui.inline.header 
                        i.cubes.grey.icon
                        |modules
                    .ui.icon.button.add_module 
                        i.plus.icon 
                        //- |module
                    .ui.cards
                        each modules
                            .card 
                                img.ui.fluid.image(src="{{c.url image_id width=400 height=200 crop='fill'}}")
                                .content
                                    a.header(href="/module/#{_id}/view") #{title}
                                    if is_admin
                                        | #{when} by #{_author_username}
                    .ui.header 
                        |questions
                    .ui.large.list
                        each course_questions
                            .item #{title}
                    div
                        +comments
                .three.wide.column
                    .ui.header 
                        i.line.chart.grey.icon
                    .ui.large.list
                        .item #{views} views
                    .ui.header 
                        |students
                    +enroll_button 
                    .ui.list 
                        each students 
                            .item #{username}
                    

template(name='enroll_button')
    if enrolled
        a.ui.fluid.large.button.unenroll
            i.checkmark.icon
            |enrolled
    else
        a.ui.fluid.large.button.enroll
            //- +ismall name='internal'
            i.sign.in.alternate.icon
            |enroll
                        




template(name='course_stats')
    //- .ui.accordion
    //-     .title
    .ui.header.refresh_course_stats
        i.line.chart.icon
        |stats
    //- i.dropdown.icon
    //- .content
    .ui.big.list
        .item #{views} views
        .item #{reservation_count} reservations
        .item #{total_earnings}c/#{total_course_hours}hrs total
        .item #{average_course_cost}c / #{average_course_duration}hrs avg course





template(name='course_view_template')
    .ui.large.list
        each courses
            .item 
                |#{title} #{price}
                .ui.small.compact.icon.button.buy_course
                    +ismall name='buy'
                    |#{buy}
        
        
